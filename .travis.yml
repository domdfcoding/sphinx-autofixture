# This file is managed by 'repo_helper'. Don't edit it directly.
---

os: linux
language: python
dist: focal
cache: pip
python:
  - '3.6'
  - '3.7'
  - '3.8'
  - '3.9'

arch:
  - amd64
  - arm64
install:

  - pip install --upgrade pip
  - pip install tox tox-travis
  - pip install coveralls coverage_pyver_pragma

script:
  - tox -vv
after_success:
  - coveralls


stages:
  - test
  - deploy_pypi


jobs:
  allow_failures:
    - arch: arm64
  exclude:
    - python: '3.7'
      arch: arm64
    - python: '3.8'
      arch: arm64
    - python: '3.9'
      arch: arm64

  include:
    - stage: test
      dist: bionic
      python: 3.8

    - stage: deploy_pypi
      python: "3.6"
      script: skip
      deploy:
        on:
          tags: true
          repo: domdfcoding/sphinx-autofixture
        provider: pypi
        username: "DomDF"
        password:
          secure: SI5A9t3XTMps5tVwIOd7SHz3zg0KQGJB6ZjK6i+xz30nkVCb8fLu4/mK3J4y6oJ7rlmL+wMeyqHCeryNpWtb9iJyGeEVG/e4pLhk/rF4okQHxKZ0bN6h+WjwF8zolrmalxDkMdNNrIrGhzkUZL+qZoiR80jgINmhUHfPlfqyuIql39sXLyNgPXitqCjUakMHzpYyCIJP9re1CBcen1u9mqQkxASf8LdHfDmr/K7+Y9o/iND5N2llkTNjnoPMHLwxWx4OojxvaXiTrGBmZ5XtlfPwDeGkXQ2S0QVORR7jJX3oQ8GDzIaFfTNiM8WyInKFUbfCyuO9+eyjNwt8FK+taqTv7z9b+fMxX1uUn9zMesIfgKCWtzSoEEPufss4cVo3PCDrpqOXvVlbgjrvQiYJHB/n5UMu1mFnQtyHC7RH0eIHSTS7l0KMlGZPDJbfeW8HBdXl0CzlvmLoVOV9hZ1DHX8WBYZh7abT36pyydx4WsNHr1tnxAJLE4WzA37tzef40zhSlbUJx6Plgt+r25JcxOsMm1dDutMB5SlSwiRR07ba7YQCpYNDdLLv3t0UGK0Tfvt02i0aTtxrBjm3zKbXS+xd06XTFRnI7iIzQflZeUV8AOGrfzB0CH1bIIOwW0eInxJ1aQM9uxPjrmxay2vrEH98T+cxGoRl0Q7XepnmvgY=
        distributions: "sdist bdist_wheel"
        skip_existing: true
